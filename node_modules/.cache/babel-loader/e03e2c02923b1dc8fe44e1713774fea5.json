{"ast":null,"code":"import _asyncToGenerator from\"D:/projects/noteApp/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"D:/projects/noteApp/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/projects/noteApp/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\projects\\\\noteApp\\\\app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from'react';import axios from'axios';import Joi from'joi';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(){var navigate=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),erro=_useState2[0],seterro=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isloading=_useState4[0],setisloading=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),errolist=_useState6[0],seterrolist=_useState6[1];var _useState7=useState({first_name:'',last_name:'',age:'',email:'',password:''}),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setuser=_useState8[1];function getUser(e){var myuser=_objectSpread({},user);myuser[e.target.name]=e.target.value;setuser(myuser);}function submitRigister(_x){return _submitRigister.apply(this,arguments);}function _submitRigister(){_submitRigister=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var validationResult,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();validationResult=validateRegisterForm(user);if(!validationResult.error){_context.next=7;break;}setisloading(false);seterrolist(validationResult.error.details);_context.next=12;break;case 7:_context.next=9;return axios.post(\"https://route-egypt-api.herokuapp.com/signup\",user);case 9:_yield$axios$post=_context.sent;data=_yield$axios$post.data;if(data.message==='success'){setisloading(false);navigate('/Login');}else{seterro(data.message);setisloading(false);}case 12:case\"end\":return _context.stop();}}},_callee);}));return _submitRigister.apply(this,arguments);}function validateRegisterForm(user){var schema=Joi.object({first_name:Joi.string().alphanum().min(3).max(8).required(),last_name:Joi.string().alphanum().min(3).max(8).required(),age:Joi.number().min(16).max(80).required(),email:Joi.string().email({minDomainSegments:2,tlds:{allow:['com','net']}}),password:Joi.string().pattern(/^[A-Z][a-z]{3,8}$/)});return schema.validate(user,{abortEarly:false});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container my-5 py-5\",children:[errolist.map(function(erro,index){if(index==4){return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:\" password invalid\"},index);}else{return/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:erro.message},index);}}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 m-auto text-center\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitRigister,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{onChange:getUser,placeholder:\"Enter your name\",name:\"first_name\",type:\"text\",className:\" form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group my-2 \",children:/*#__PURE__*/_jsx(\"input\",{onChange:getUser,placeholder:\"Enter your name\",name:\"last_name\",type:\"text\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group my-2 \",children:/*#__PURE__*/_jsx(\"input\",{onChange:getUser,placeholder:\"age\",name:\"age\",type:\"number\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"input\",{onChange:getUser,placeholder:\"Enter email\",type:\"email\",name:\"email\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group my-2\",children:/*#__PURE__*/_jsx(\"input\",{onChange:getUser,placeholder:\"Enter you password\",type:\"password\",name:\"password\",className:\" form-control\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-info\",children:isloading?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):'register'}),erro&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:erro})]})})]})});}","map":{"version":3,"sources":["D:/projects/noteApp/app/src/componet/Register/Register.jsx"],"names":["React","useState","axios","Joi","useNavigate","Register","navigate","erro","seterro","isloading","setisloading","errolist","seterrolist","first_name","last_name","age","email","password","user","setuser","getUser","e","myuser","target","name","value","submitRigister","preventDefault","validationResult","validateRegisterForm","error","details","post","data","message","schema","object","string","alphanum","min","max","required","number","minDomainSegments","tlds","allow","pattern","validate","abortEarly","map","index"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport axios from 'axios'\r\nimport Joi from 'joi'\r\nimport {useNavigate} from 'react-router-dom'\r\nexport default function Register() {\r\n    let navigate=useNavigate()\r\n    const [erro, seterro] = useState('')\r\n    const [isloading, setisloading] = useState(false)\r\n    const [errolist, seterrolist] = useState([])\r\n\r\nconst [user, setuser] = useState({\r\n  \r\n    first_name:'',\r\n    last_name:'',\r\n    age:'',\r\n    email:'',\r\n    password:'',\r\n\r\n})\r\nfunction getUser(e) {\r\n    let myuser={...user}\r\n    myuser[e.target.name]=e.target.value;\r\n    setuser(myuser)\r\n}\r\n\r\nasync function submitRigister(e) {\r\n    e.preventDefault() \r\n\r\n    let validationResult=validateRegisterForm(user)\r\n\r\n    if(validationResult.error)\r\n    {\r\n        setisloading(false)\r\n         seterrolist(validationResult.error.details)\r\n    }\r\n    else\r\n    {\r\n        let {data} =await axios.post(\"https://route-egypt-api.herokuapp.com/signup\",user)\r\n\r\n        if (data.message==='success') {\r\n         setisloading(false)\r\n         navigate('/Login')\r\n        }\r\n        else{\r\n            seterro(data.message)\r\n            setisloading(false)\r\n        }\r\n    }\r\n  \r\n}\r\n\r\nfunction validateRegisterForm(user) {\r\n    let schema = Joi.object({\r\n      first_name: Joi.string().alphanum().min(3).max(8).required(),\r\n      last_name: Joi.string().alphanum().min(3).max(8).required(),\r\n      age: Joi.number().min(16).max(80).required(),\r\n      email: Joi.string().email({ minDomainSegments: 2, tlds: { allow: ['com', 'net'] } }),\r\n      password: Joi.string().pattern(/^[A-Z][a-z]{3,8}$/),\r\n    });\r\n    return schema.validate(user,{abortEarly:false});\r\n  }\r\n  return (\r\n    <div>\r\n\r\n\r\n<div className=\"container my-5 py-5\">\r\n{errolist.map((erro,index)=>{\r\nif (index ==4)\r\n {\r\n    return <div key={index} className='alert alert-danger'> password invalid</div>\r\n}\r\nelse\r\n{\r\nreturn <div key={index} className='alert alert-danger'>{erro.message}</div>\r\n}\r\n\r\n})}\r\n                <div className=\"col-md-5 m-auto text-center\">\r\n                \r\n                    <form onSubmit={submitRigister} >\r\n                        <div className=\"form-group\">\r\n                            <input onChange={getUser}  placeholder=\"Enter your name\" name=\"first_name\" type=\"text\" className=\" form-control\" />\r\n                        </div>\r\n                        <div className=\"form-group my-2 \">\r\n                            <input onChange={getUser}  placeholder=\"Enter your name\" name=\"last_name\" type=\"text\" className=\"form-control\" />\r\n                        </div>\r\n                        <div className=\"form-group my-2 \">\r\n                            <input onChange={getUser}  placeholder=\"age\" name=\"age\" type=\"number\" className=\"form-control\" />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <input onChange={getUser}  placeholder=\"Enter email\" type=\"email\" name=\"email\" className=\"form-control\" />\r\n                        </div>\r\n                        <div className=\"form-group my-2\">\r\n                            <input onChange={getUser}  placeholder=\"Enter you password\" type=\"password\" name=\"password\" className=\" form-control\" />\r\n                        </div>\r\n                       \r\n                        <button type='submit' className='btn btn-info'>{isloading?<i className='fas fa-spinner fa-spin'></i>:'register'}</button>\r\n                        {erro&&<div className='alert alert-danger'>{erro}</div>}\r\n                    </form>\r\n                </div>\r\n            </div>\r\n\r\n\r\n\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}